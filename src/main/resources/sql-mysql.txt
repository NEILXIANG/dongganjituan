drop table if exists logistics_company;
create table logistics_company (
	id bigint,
	code varchar(50) unique,
	name varchar(50),
	reg_mail_no varchar(255),
	status int,
	modified timestamp,
	created timestamp
);

drop table if exists item_prop;
create table item_prop (
	id int primary key auto_increment,
	pid bigint,
	name varchar(50),
	modified timestamp,
	created timestamp,
	unique key(pid, name)
);

drop table if exists prop_value;
create table prop_value (
	id int primary key auto_increment,
	vid bigint,
	name varchar(50),
	pid bigint,
	modified timestamp,
	created timestamp,
	unique key(vid, name, pid)
);

drop table if exists goods;
create table goods (
	id bigint primary key auto_increment, 
	tao_id bigint unique,
	hid varchar(100) not null unique,
	title varchar(255), 
	url varchar(255),
	weight int unsigned,
	price int unsigned,
	status int,
	template varchar(50),
	discount decimal(3, 2) default 0.00,
	modified timestamp,
	created timestamp
);

drop table if exists sku;
create table sku (
	id bigint primary key auto_increment,
	tao_id bigint unsigned,
	goods_id varchar(100),
	color varchar(20),
	size varchar(20),
	price int unsigned,
	quantity int unsigned,
	modified timestamp,
	created timestamp,
	unique key(goods_id, color, size)
);

drop table if exists area;
create table area (
	id bigint primary key,
	name varchar(50),
	parent_id bigint,
	type bigint,
	modified timestamp,
	created timestamp
	);

drop table if exists refund;
create table refund (
	id bigint primary key auto_increment,
	buyer_nick varchar(50),
	nick varchar(50),
	oid bigint,
	refund_fee int,
	rid bigint,
	seller_nick varchar(50),
	status varchar(50),
	tid bigint,
	user_id bigint,
	modified timestamp,
	created timestamp,
	unique key(oid)
);

drop table if exists trade;
create table trade (
	id bigint primary key auto_increment,
	tid bigint unique not null,
	name varchar(50) not null, 
	phone varchar(20), 
	mobile varchar(20) not null,
	area_id bigint,
	state varchar(20),
	city varchar(20),
	district varchar(20),
	address varchar(255) not null, 
	postcode varchar(20), 
	delivery varchar(20),
	delivery_money int,
	template_id int, 
	total_weight int unsigned, 
	goods_count bigint unsigned,
	payment int unsigned, 
	distributor_id int unsigned, 
	status varchar(50),
	my_status tinyint,
	seller_memo varchar(255),
	buyer_message varchar(255),
	seller_nick varchar(50),
	come_from varchar(25),
	modified timestamp default current_timestamp,
	created timestamp
);

drop table if exists order1;
create table order1
(
	id bigint primary key auto_increment, 
	tid bigint unsigned not null, 
	oid bigint unsigned,
	goods_id varchar(100),
	title varchar(255),
	pic_path varchar(255),
	sku_id bigint unsigned not null, 
	quantity bigint unsigned,
	price int unsigned,
	discount decimal(3,2), 
	weight int unsigned default 0,
	payment int unsigned,
	logistics_company varchar(50),
	invoice_no varchar(50),
	status varchar(50),
	modified timestamp,
	created timestamp
);

drop table if exists user1;
create table user1 (
	id int primary key auto_increment,
	username varchar(100) unique not null,
	password varchar(100) not null,
	name varchar(50) not null,
	phone varchar(50),
	enabled tinyint, 
	type varchar(25),
	modified timestamp,
	created timestamp
);
insert into user1 values(null, 'superadmin', 'superadmin', '超级管理员', '15257197713', 1, 'SuperAdmin', now(), now());
insert into user1 values(null, 'admin', 'admin', '管理员', '15257197713', 1, 'Admin', now(), now());

drop table if exists user_authority;
create table user_authority (
	id int primary key auto_increment,
	username varchar(100),
	authority varchar(20),
	modified timestamp,
	created timestamp,
	unique key(username, authority)
);
insert into user_authority values(null, 'superadmin', 'manager_system', now(), now());
insert into user_authority values(null, 'superadmin', 'logined', now(), now());

insert into user_authority values(null, 'admin', 'manager_system', now(), now());
insert into user_authority values(null, 'admin', 'logined', now(), now());

drop table if exists distributor;
create table distributor (
	id int primary key auto_increment,
	username varchar(100) not null,
	deposit bigint unsigned not null default 0, 
	discount decimal(3, 2), 
	seller_nick varchar(255),
	token varchar(255),
	refresh_token varchar(255),
	modified timestamp,
	created timestamp,
	last_refresh timestamp,
	type varchar(25) default "normal",
	sync varchar(10) default "no",
	unique key(seller_nick)
);

drop table if exists province;
create table province (
	id int primary key auto_increment,
	name varchar(20) not null,
	unique key(name)
);
insert into province values (null, "安徽");
insert into province values (null, "浙江");

drop table if exists city;
create table city (
	id int primary key auto_increment,
	name varchar(20) not null,
	pid int not null,
	unique key(id, name)
);
insert into city values(null, "滁州", 1);
insert into city values(null, "合肥", 1);
insert into city values(null, "杭州", 2);
insert into city values(null, "湖州", 2);
insert into city values(null, "宁波", 2);
insert into city values(null, "衢州", 2);

drop table if exists delivery;
create table delivery (
	id int primary key auto_increment,
	name varchar(20) not null
);
insert into delivery values (null, "申通");
insert into delivery values(null, "顺丰");	

drop table if exists template;
create table template (
	id int primary key auto_increment,
	name varchar(50) not null,
	logistics_type varchar(25),
	area varchar(50),
	start_standard int default 0,
	start_fee int default 0,
	add_standard int default 0,
	add_fee int default 0,
	modified timestamp,
	created timestamp,
	unique key(name, logistics_type, area)
);

drop table if exists template_name;
create table template_name (
	id int primary key auto_increment,
	name varchar(50) not null,
	modified timestamp,
	created timestamp,
	unique key(name)
);

	
	